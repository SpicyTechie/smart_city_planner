Timeline and dependencies here
Revised timeline algorithm (v2)
